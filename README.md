# MySQL
Конспект занятий по MySQL на русском языке. Краткое содержание основным тем.

Ссылки на литературу.

1. https://stepik.org/course/113918 - "Поколение Python": базы данных и SQL для начинающих
2. SQL. Pocket Guide (fourth edition), Alice Zhao, 2024

# 0.Термины и определения.
**SQL**(Structured Query Language) - язык запросов, обеспечивающий создание, чтение, обновление или удаление данных (или операции **CRUD**).                                                                                      
**Данные** - это организованная информация об отдельной сущности (человек, предмет, организация).
**База данных** — это организованная и определенным образом структурированная коллекция данных.

# 1. База данных. Применение. Требования к современным базам данных. Виды представления информации

**Данные** - это любая организованная информация об отдельной сущности (человек, предмет, организация).
**База данных** - это структурированная коллекция данных.

Применяются в различных сферах деятельности, такие как медицина, бизнес, финансы и другие.

Современные базы данных отвечают следующим **требованиям**:

1. Хранение объемных баз данных
2. Высокая степень организованности
3. Доступ к данным

Выделяют следующие **представления** информации:

1. Плоские файлы (**CSV-файлы**). Нет строгой организации информации.
2. Иерархическая модель. Позволяет эффективно описать модель организации, однако данная модель далека от реальной картины, так как связи между объектами могут быть гораздо сложнее.
3. Сетевая модель. Учитывает дополнительные связи между объектами, однако сложно контролировать все связи и менять их структуру.
4. Реляционная модель. Табличное представление данных. Удобно производить вставку данных, обновление и удаление, когда таблицы являются независимыми.
5. Модель ключ-значение. Очень полезное представление в плане производительности, но неэффективно для анализа данных.
6. Документная модель. Удобна для разворачивание масштабных проектов, т.к. файлы в формате **JSON** или **XML** описывают полную информацию.

# 2. Реляционные базы данных

**Реляционная модель** - совокупность данных, представленная в виде таблиц.

Строки в SQL называют **записями**, стобцы - **полями**. 

Существует ряд особенностей, отличающих таблицу в реляционной базе данных от обычных таблиц:

1. Каждое поле в таблице имеет уникальное имя и тип данных, хранимых в данной таблице.

   Поле (или несколько полей), значения которого однозначно определяют записи в таблице, называют **первичным ключ (PRIMARY KEY)**. Другими словами, **первичный ключ** определяет каждую уникальную запись в таблице.
   Первичный ключ не должен содержать пустых строк.

   Пример уникального ключа: на полке у студента могут лежать книги одного автора и одной года издания, но расположение книг на полки разное. Это уникальное расположение книг на полке и есть первичный ключ. Он позволяет найти между этими книгами в таблице.
   
   Причем первичный ключ может простым - одно поле, составным - несколько полей. Пример составного ключа - город и номер школы. Номер школы или город у нескольких записей могут совпадать, но одновременно, чтобы оба значения в совпадало невозможно.

2. В таблице реляционной базы данных помимо первичного ключе может существовать и **внешний ключ (FOREIGN KEY)**. Он позволяет устанавливает связи между таблицами.

# 3. Типы данных

Почему используются различные типы данных:
1. Ограниченность данных у полей (столбцов) - у каждого поля свой тип данных. Это помогает избежать лишних ошибок;
2. Компактное хранение данных;
3. Удобная сортировка.

Выделяют следующие **типы данных**:
1. Строковый - одинарные или двойные кавычки. Наиболее используемый тип данных. 
2. Числовой - целые числа и числа с фиксированной точкой.
3. Дата и время - 2023-06-14 12:00:00 - стандартный формат хранения. Возможны другие представления.
   Подтипы:
   1. Datetime -  широкий диапазон времени, но нет учёта часового пояса.
   2. Timestamp - диапазон времени уже меньше по сравнению по Datetime, но здесь учитывается часовой пояс.
   3. Date - YYYY-MM-DD
   4. Time - HH:MM:SS
   5. Year - 1901 – 2155
5. NULL - отсутствие данных

# Представления

**Представление** - это виртуальная таблица. Она позволяет динамически обращаться к данным какой-либо таблицы, когда это необходимо, но фактически она не хранит никаких данных,а лишь ссылается на них.

Удобно использовать в случаях:

1. Ограничения доступа к таблице. Администаторы базы данных могут читать данные из таблицы и вносить в них изменения, а остальные - только читают данные.
2. Упрощения запросов. Удобно использование для кокретной задачи. Пример - работа с автором Стивен Кинг и извлечение его книг.
3. Форматирование данных. Проводить различные изменения не с первоначальной таблицей, поскольку она может быть удобна для других задачей, а с её представлением.

Синтаксис:

Создание или замена :
CREATE OR REPLACE VIEW <имя представления> AS 
<извлекающий запрос>

Если создать представление невозможно, то следует обратиться к администратору базы данных

Изменение: меняем CREATE на ALTER. Если указанного представления нет, то ошибка. Если CREATE OR REPLACE , ошибка не возникнет.
Удаление: меняем CREATE на DROP. Лучше указывать в конце IF EXISTS, чтобы не вылетала ошибка при удалении несуществующего представления.
Отменить удаление представления невозможно!!!

Представления используются для **ИЗВЛЕЧЕНИЯ ДАННЫХ, А НЕ ДЛЯ ИХ ИЗМЕНЕНИЯ**. Поэтому использование INSERT, UPDATE или DELETE приведёт к ошибке.

Сравнение подзапроса и представления. Оба являются результатом запроса, однако подзапрос является временным, а представление сохраняется. Поэтому на созданное представление можно ссылаться.

Для того, чтобы обратится к существующим представлениям в MySQL можно прописать следующее:

SHOW FULL TABLE
WHERE table_type = 'VIEW';







   




   
